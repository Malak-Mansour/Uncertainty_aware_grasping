## Simulate leaf occlusions to partial pointcloud
Set the occlusion amount (0.1, 0.2, 0.3, 0.4) as the leaf_coverage argument in the _create_leaf_occlusion_ function call.
However, no need to run this step since the folders are already in PointAttN data folders.
```
python simulate_occlusions.py
```

## PointAttN
We are running it with no occlusions, occlusion 0.1, 0.2, 0.3, and 0.4.
```
cd PointAttN-Modified_uncertainty
```
1. uncomment the 2 data_dir lines in train_not_noisy.py with the experiment (what level of occlusions) that u want
2. uncomment the data_dir line in _test_pcn_MC.py_ with the experiment (what level of occlusions) that u want
3. (un)comment the "If doing occlusions" section in _PCDDataset.py_ depending on your experiment
4. Write the model name in _cfgs/PointAttN.yaml_
     PointAttN_baseline_cd_matching_f1 (without dropout)
   or
     PointAttN_baseline_cd_matching_f1_MC (with dropout)
5. ```
   python train_not_noisy.py -c PointAttN.yaml
   ```
6. Choose the path of the latest epoch in the training results and add that to the config file
   ```
   python test_pcn_MC.py -c PointAttN.yaml
   ```


## GraspNet
Modify the paths in the following files. Note that .npz are the completion outputs from PointAttN
```
cd contact_graspnet_pytorch
```
1. ```
   python move_npz_to_npy.py  #includes filtering the pcl
   ```
2. ```
   python contact_graspnet_pytorch/inference.py --np_path=npy_files/*.npy --forward_passes=5 --z_range=[0.2,1.1]​
   ```
3. Add the .npz fields from the completed point cloud to the ones generated by GraspNet all in the same new .npz files in the folder _results_with_completion_
   ```
   python add_completion_fields.py
   ```

​
### Visualize and filter grasps ​
```
python filter_grasps.py
```
After filtering out the bad grasps, choose the strawberry (.npz) with the least stddev to pick first
```
python rank_stddev.py
```
